<table class="form" width="100%">
    <tr>
        <td width="85px" class="text-right" style="font-weight: bold;">Product :</td>
        <td>
            <select name="form[product_id]" class="normal">
                <option value="92" selected="selected">Hot Rolled Steel Plate</option>
            </select>
        </td>
        <td width="85px" class="text-right" style="font-weight: bold;">Stock :</td>
        <td>
            <select name="form[stock_id]" class="normal" onchange="bind_stock_params(this.value); show_position_table(this.value);">
                <option value="0"{if !isset($stock)} selected="selected"{/if}>--</option>
                {foreach from=$stocks item=row}
                <option value="{$row.stock.id}"{if isset($stock) && $stock.id == $row.stock.id} selected="selected"{/if}>{$row.stock.title|escape:'html'}</option>
                {/foreach}
            </select>
            <input type="hidden" id="dimension_unit" value="{if isset($stock)}{$stock.dimension_unit}{/if}">
            <input type="hidden" id="weight_unit" value="{if isset($stock)}{$stock.weight_unit}{/if}">
        </td>
        <td width="85px" class="text-right">Biz :</td>
        <td>
            <input type="text" id="biz_title" name="form[biz_title]" class="normal"{if isset($form.biz_title)} value="{$form.biz_title}"{/if}>
            <input type="hidden" id="biz_id" name="form[biz_id]" value="{if isset($form.biz_id)}{$form.biz_id}{else}0{/if}">
{*        
            <select id="biz" name="form[biz_id]" class="normal" onchange="bind_biz_companies(this.value, 'prod'); select_bizes(this.value);">
                <option value="0">--</option>
                {foreach from=$bizes item=row}
                <option value="{$row.biz.id}"{if $biz_id == $row.biz.id} selected="selected"{/if}>{$row.biz.number_output|escape:'html'} - {$row.biz.title|escape:'html'}</option>
                {/foreach}
            </select>
*}            
        </td>            
    </tr>
    <tr>
        <td></td><td></td>
        <td width="85px" class="text-right" style="font-weight: bold;">Location :</td>
        <td>
            <select id="locations" name="form[location_id]" class="normal">
                <option value="0">--</option>
                {foreach from=$locations item=row}
                <option value="{$row.company.id}"{if isset($form.location_id) && $form.location_id == $row.company.id} selected="selected"{/if}>{$row.company.doc_no|escape:'html'} ({$row.company.stocklocation.title|escape:'html'})</option>
                {/foreach}
            </select>
        </td>
{*        
        <td width="85px" class="text-right">Producer :</td>
        <td>
            <select id="suppliers" name="form[supplier_id]" class="normal biz-companies-prod" onchange="select_companies(this.value, 'biz-companies-prod');">
                <option value="0">--</option>
                {foreach from=$producers item=row}
                <option value="{$row.company.id}"{if $supplier_id == $row.company.id} selected="selected"{/if}>{$row.company.title|escape:'html'}</option>
                {/foreach}                
            </select>
        </td>            
*}
    </tr>
</table>
<div class="separator pad"><!-- --></div>

<span id="position-add-text"{if isset($stock)} style="display:none;"{/if}>Please select stock first</span>
<table class="list" width="100%" id="position-add-table"{if !isset($stock)} style="display: none;"{/if}>
    <tbody>
        <tr class="top-table">
            <th>No</th>
            <th width="8%">Steel Grade</th>
            <th>Thickness<span class="lbl-dim">{if isset($stock)}, {$stock.dimension_unit}{/if}</span></th>
            <th>Width<span class="lbl-dim">{if isset($stock)}, {$stock.dimension_unit}{/if}</span></th>
            <th>Length<span class="lbl-dim">{if isset($stock)}, {$stock.dimension_unit}{/if}</span></th>
            <th>Unit Weight<span class="lbl-wgh">{if isset($stock)}, {$stock.weight_unit|wunit}{/if}</span></th>
            <th>Otty, pcs</th>
            <th>Weight<span class="lbl-wgh">{if isset($stock)}, {$stock.weight_unit}{/if}</span></th>
            <th>Price<span class="lbl-price">{if isset($stock)}, {$stock.currency_sign}/{$stock.weight_unit|wunit}{/if}</span></th>
            <th>Value<span class="lbl-value">{if isset($stock)}, {$stock.currency_sign}{/if}</span></th>
            <th width="10%">Delivery Time</th>
            <th width="10%">Notes</th>
            <th width="10%">Internal Notes</th>
{*          20120722, zharkov пока убрал такую возможность            
            <th width="8%">Biz</th>
*}            
{*            <th width="8%">Producer</th>  *}
        </tr>
        {section name=i start=0 loop=10 step=1}
        <tr>
            <td>
                {$smarty.section.i.index+1}
                <input type="checkbox" class="cb-row" value="{$smarty.section.i.index}" checked="checked" style="display: none; visibility: hidden;">
            </td>
            <td>
                <select name=steelgrade[{$smarty.section.i.index}] class="max">
                    <option value="0">--</option>
                    {foreach from=$steelgrades item=row}
                    <option value="{$row.steelgrade.id}"{if isset($steelgrade[$smarty.section.i.index]) && $steelgrade[$smarty.section.i.index] == $row.steelgrade.id} selected="selected"{/if}>{$row.steelgrade.title|escape:'html'}</option>
                    {/foreach}                    
                </select>
            </td>
            <td><input type="text"{if isset($thickness[$smarty.section.i.index]) && !empty($thickness[$smarty.section.i.index])} value="{$thickness[$smarty.section.i.index]|escape:'html'}"{/if} id="thickness-{$smarty.section.i.index}" name="thickness[{$smarty.section.i.index}]" class="max" onkeyup="calc_unitweight({$smarty.section.i.index}); calc_weight({$smarty.section.i.index}); calc_value({$smarty.section.i.index}); calc_total();"></td>
            <td><input type="text"{if isset($width[$smarty.section.i.index]) && !empty($width[$smarty.section.i.index])} value="{$width[$smarty.section.i.index]|escape:'html'}"{/if} id="width-{$smarty.section.i.index}" name="width[{$smarty.section.i.index}]" class="max" onkeyup="calc_unitweight({$smarty.section.i.index}); calc_weight({$smarty.section.i.index}); calc_value({$smarty.section.i.index}); calc_total();"></td>
            <td><input type="text"{if isset($length[$smarty.section.i.index]) && !empty($length[$smarty.section.i.index])} value="{$length[$smarty.section.i.index]|escape:'html'}"{/if} id="length-{$smarty.section.i.index}" name="length[{$smarty.section.i.index}]" class="max" onkeyup="calc_unitweight({$smarty.section.i.index}); calc_weight({$smarty.section.i.index}); calc_value({$smarty.section.i.index}); calc_total();"></td>
            <td><input type="text"{if isset($unitweight[$smarty.section.i.index]) && !empty($unitweight[$smarty.section.i.index])} value="{$unitweight[$smarty.section.i.index]|escape:'html'|string_format:'%.2f'}"{/if} id="unitweight-{$smarty.section.i.index}" name="unitweight[{$smarty.section.i.index}]" class="max" onkeyup="calc_weight({$smarty.section.i.index}); calc_value({$smarty.section.i.index}); calc_total();"></td>
            <td><input type="text"{if isset($qtty[$smarty.section.i.index]) && !empty($qtty[$smarty.section.i.index])} value="{$qtty[$smarty.section.i.index]|escape:'html'}"{/if} id="qtty-{$smarty.section.i.index}" name="qtty[{$smarty.section.i.index}]" class="max" onkeyup="calc_weight({$smarty.section.i.index}); calc_value({$smarty.section.i.index}); calc_total();"></td>
            <td><input type="text"{if isset($weight[$smarty.section.i.index]) && !empty($weight[$smarty.section.i.index])} value="{$weight[$smarty.section.i.index]|escape:'html'|string_format:'%.2f'}"{/if} id="weight-{$smarty.section.i.index}" name="weight[{$smarty.section.i.index}]" class="max" onkeyup="calc_value({$smarty.section.i.index}); calc_total();"></td>
            <td><input type="text"{if isset($price[$smarty.section.i.index]) && !empty($price[$smarty.section.i.index])} value="{$price[$smarty.section.i.index]|escape:'html'|string_format:'%.2f'}"{/if} id="price-{$smarty.section.i.index}"  name="price[{$smarty.section.i.index}]" class="max" onkeyup="calc_value({$smarty.section.i.index}); calc_total();"></td>
            <td><input type="text"{if isset($val[$smarty.section.i.index]) && !empty($val[$smarty.section.i.index])} value="{$val[$smarty.section.i.index]|escape:'html'|string_format:'%.2f'}"{/if} id="value-{$smarty.section.i.index}"  name="value[{$smarty.section.i.index}]" class="max"></td>
            <td><input type="text"{if isset($delivery_time[$smarty.section.i.index]) && !empty($delivery_time[$smarty.section.i.index])} value="{$delivery_time[$smarty.section.i.index]|escape:'html'}"{/if} name="delivery_time[{$smarty.section.i.index}]" class="max"></td>
            <td><input type="text"{if isset($notes[$smarty.section.i.index]) && !empty($notes[$smarty.section.i.index])} value="{$notes[$smarty.section.i.index]|escape:'html'}"{/if} name="notes[{$smarty.section.i.index}]" class="max"></td>
            <td><input type="text"{if isset($internal_notes[$smarty.section.i.index]) && !empty($internal_notes[$smarty.section.i.index])} value="{$internal_notes[$smarty.section.i.index]|escape:'html'}"{/if} name="internal_notes[{$smarty.section.i.index}]" class="max"></td>
{*          20120722, zharkov пока убрал такую возможность            
            <td>
                <select name="biz[{$smarty.section.i.index}]" class="max biz" onchange="bind_biz_companies(this.value, 'prod', 'producer-{$smarty.section.i.index}');">
                    <option value="0">--</option>
                    {foreach from=$bizes item=row}
                    <option value="{$row.biz.id}" {if isset($biz[$smarty.section.i.index]) && $biz[$smarty.section.i.index] == $row.biz.id} selected="selected"{/if}>{$row.biz.number_output|escape:'html'} - {$row.biz.title|escape:'html'}</option>
                    {/foreach}
                </select>            
            </td>
*}            
{*            
            <td>
                <select id="producer-{$smarty.section.i.index}" name="producer[{$smarty.section.i.index}]" class="max biz-companies-prod">
                    <option value="0">--</option>
                    {foreach from=$producer_list[$smarty.section.i.index] item=row}
                    <option value="{$row.company.id}" {if isset($producer[$smarty.section.i.index]) && $producer[$smarty.section.i.index] == $row.company.id} selected="selected"{/if}>{$row.company.title|escape:'html'}</option>
                    {/foreach}
                </select>                
            </td>
*}            
        </tr>        
        {/section}
    </tbody>    
</table>